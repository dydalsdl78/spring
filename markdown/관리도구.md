# Maven

자바용 프로젝트 관리 도구.

개발을 할 때 많은 라이브러리들과 해당 라이브러리가 작동하기 위해 필요한 라이브러리까지 관리하여 네트워크를 통해 자동으로 다운 받아준다. Maven은 프로젝트의 전체적인 라이프 사이클을 관리하는 도구이며, 많은 편리함과 이점이 있어 널리 사용되고 있다.

미리 정의하고 있는 빌드 순서가 있으며 이 순서를 라이프사이클이라고 한다. 라이프 사이클의 빌드 단계를 phase라고 하는데 이런 phase들은 의존관계를 가지고 있다.

- Clean : 이전 빌드에서 생성된 파일들을 **삭제**하는 단계
- Validate : 프로젝트가 올바른지 확인하고 필요한 모든 **정보를 사용할 수 있는지 확인**하는 단계
- Compile : 프로젝트의 소스코드를 **컴파일**하는 단계
- Test : 유닛(단위) **테스트**를 수행하는 단계(테스트 실패시 빌드 실패로 처리, 스킵 가능)
- Package : 실제 컴파일된 소스 코드와 리소스들을 jar등의 **배포를 위한 패키지로 만드는** 단계
- Verify : 통합테스트 결과에 대한 검사를 실행하여 **품질 기준을 충족하는 지 확인**하는 단계
- Install : 패키지를 로컬 저장소에 **설치**하는 단계
- Site : 프로젝트 **문서를 생성**하는 단계
- Deploy : 만들어진 Package를 **원격 저장소에 release**하는 단계

이 외에도 더 많은 라이프 사이클이 존재한다. 이를 크게 Clean, Build, Site 세 가지로 나누고, 각 단계를 모두 수행하는 것이 아니라 원하는 단계까지만 수행 할 수도 있다.

#### Phase(단계)

라이프 사이클의 각 단계.

의존 관계를 가지고 있어 해당 단계가 수행되려면 이전 단계가 모두 수행되어야 한다.

즉, 모든 빌드 단계는 이전 단계가 성공적으로 실행되었을 때 실행된다는 것이 Dependency이다.

#### Goal

특정 작업, 최소한의 실행단위(task)

하나의 플러그인에서는 여러 작업을 수행할 수 있도록 지원하며, 플러그인에서 실행할 수 있는 각각의 기능(명령)을 Goal이라고 한다.

각각의 Phase에 연계된 Goal을 실행하는 과정을 Build라고 한다.

플러그인의 Goal을 실행하는 방법은 다음과 같다.

> mvn groupld:artifactld:version:goal(아래와 같이 생략 가능)
>
> mvn plugin:goal

#### POM(Project Object Model)

pom은 프로젝트의 모든 정보를 담고 있는 파일이다.

- 프로젝트 정보 : 프로젝트의 이름, 개발자 목록, 라이센스 등
- 빌드 설정 :  소스, 리소스, 라이프 사이클 별 실행한 플러그인(goal) 등 빌드와 관련된 설정
- 빌드 환경 : 사용자 환경 별로 달라질 수 있는 프로파일 정보
- POM 연관 정보 : 의존 프로젝트(모듈), 상위 프로젝트, 포함하고 있는 하위 모듈 등



# Gradle

빌드 배포 도구이다. 

maven의 경우 XML로 라이브러리를 정의하고 활용하도록 되어 있으나, Gradle의 경우 별도의 빌드스크립트를 통하여 사용할 어플리케이션 버전, 라이브러리 등의 항목을 설정 할 수 있다.



장점으로는 스크립트 언어로 구성되어 있기 때문에, XML과 달리 변수 선언, if, else, for 등의 로직이 구현 가능하여 간결하게 구성 가능하다.

- 라이브러리 관리 : maven 레파지토리를 동일하게 사용할 수 있어서 설정된 서버를 통하여 라이브러리를 다운로드 받아 모두 동일한**의존성**을 가진 환경을 수정 할 수 있다. 자신이 추가한 라이브러리도 레파지토리 서버에 올릴 수 있다.

- 프로젝트 관리 : 모든 프로젝트가 일관된 디렉토리 구조를 가지고 빌드 프로세스를 유지하도록 도와준다.
- 단위 테스트 시 의존성 관리 : Junit 등을 사용하기 위해서 명시한다.

##### Gradel이 Maven 보다 좋은점

- Build라는 동적인 요소를 XML로 정의하기에는 어려운 부분이 많다.

  - 설정 내용이 길어지고 가독성이 떨어짐.
  - 의존 관계가 복잡한 프로젝트 설정하기에는 부적절
  - 상속구조를 이용한 멀티 모듈 구현
  - 특정 설정을 소수의 모듈에서 공유하기 위해서는 부모 프로젝트를 생성하여 상속하게 해야함(상속의 단점 생김)

- Gradle은 그루비를 사용하기 때문에, 동적인 빌드는 그루비 스크립트로 플러그인을 호출하거나 직접 코드를 짜면 된다.

  - Configuration Injectio 방식을 사용해서 공통 모듈을 상속하는 단점을 커버했다.
  - 설정 주입시 프로젝트의 조건을 체크할 수 있어서 프로젝트 별로 주입되는 설정을 다르게 할 수 있다.

  

#### 의존성(Dependency)

	- 코드에서 두 모듈 간의 연결
	- 객체지향언어에서는 두 클래스 간의 관계라고도 말함.
	- 일반적으로 둘 중 하나가 다른 하나를 어떤 용도를 위해 사용함.

##### 의존성이 위험한 이유

- 하나의 모듈이 바뀌면 의존한 다른 모듈까지 바뀐다.

##### 의존성 주입(Dependency Injection)이 필요한 이유

- **new** 를 사용해서 모듈내에 다른 모듈을 초기화하지 않으려면 객체 생성은 다른 곳에서 하고, 생성된 객체를 참조하면 된다.
- 의존성 주입은 Inversion of Control 개념을 바탕으로 한다. 클래스가 외부러부터 의존성을 가져야 한다.
- 클래스는 다른 클래스를 인스턴스화해야 하지만, 구성 클래스에서 인스턴스를 가져와야 합니다.

✔ 프로그래밍에서 의존 관계는 **new** 로 표현된다!

ex)

```java
Spring.class

public Spring(){
new Java();
}
```

```java
Java java = new Java();
Spring spring = new Spring(java);
```

Java 인스턴스를 생성하고 Spring 인스턴스를 생성 할때 매개변수로 java 인스턴스를 넣어준다.

이때, Spring 클래스에서 Java 클래스를 주입한다고 말을 하며, 코드의 단순화와 종속적이던 코드의 수를 줄일 수 있다.



>💦어려운 점💦
>
>빌드 도구는 python에서 requirments.txt 로 일괄적으로 라이브러리를 install하는 것은 비슷하지만 하위 라이브러리 관리 등 더 복잡하고 훨씬 좋은 도구인듯 함.
>
>아직은 직접 사용하고 시행착오를 겪은 것이 아니라 설명이 와닿지 않는 부분이 많다.